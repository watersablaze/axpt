/* ğŸŒ Base circuit overlay */
.circuitTexture {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 2;
  pointer-events: none;
  background-image: url('/textures/circuit_board.png');
  background-repeat: repeat;
  background-size: 480px auto;
  mix-blend-mode: soft-light;
  opacity: 0.14;
  transition:
    opacity 1.2s ease,
    filter 1.2s ease,
    background-color 1.5s ease,
    --surge-color 1.8s ease; /* ğŸŒˆ smooth hue morph */
  animation: circuitDrift 42s ease-in-out infinite;
  will-change: transform, filter, opacity;
}

/* Default chroma tone when no section active */
body:not([data-section]) .circuitTexture {
  filter:
    drop-shadow(-0.6px 0 rgba(255, 100, 100, 0.3))
    drop-shadow(0.6px 0 rgba(100, 200, 255, 0.3))
    blur(0.25px);
}

/* âœ¨ Section-based tints â€” adaptive â€œchargesâ€ */
body[data-section="vision"] .circuitTexture {
  --surge-color: rgba(100, 180, 255, 0.55); /* cool blue-gold */
}
body[data-section="nommo"] .circuitTexture {
  --surge-color: rgba(180, 100, 255, 0.55); /* electric violet */
}
body[data-section="vault"] .circuitTexture {
  --surge-color: rgba(0, 255, 160, 0.48); /* emerald teal */
}
body[data-section="contracts"] .circuitTexture {
  --surge-color: rgba(255, 230, 100, 0.48); /* golden amber */
}

/* âš¡ Surge behavior */
.surge {
  animation:
    circuitSurge 2.4s ease-in-out forwards,
    colorShift 6s ease-in-out infinite alternate; /* ğŸ’« hue shimmer overlay */
}

/* âš¡ Surge keyframes */
@keyframes circuitSurge {
  0% {
    opacity: 0.14;
    filter: brightness(1) saturate(1.1);
  }
  40% {
    opacity: 0.34;
    filter: brightness(1.45)
            saturate(1.55)
            drop-shadow(0 0 24px var(--surge-color))
            blur(0.3px);
  }
  70% {
    opacity: 0.24;
    filter: brightness(1.25)
            saturate(1.3)
            drop-shadow(0 0 12px var(--surge-color))
            blur(0.25px);
  }
  100% {
    opacity: 0.14;
    filter: brightness(1) saturate(1.1);
  }
}

/* ğŸŒˆ Gentle hue oscillation â€” continuous spectral life */
@keyframes colorShift {
  0%, 100% { filter: hue-rotate(0deg); }
  50%      { filter: hue-rotate(6deg); }
}

/* ğŸ Ambient drift and shimmer */
@keyframes circuitDrift {
  0%, 100% {
    filter:
      drop-shadow(-0.6px 0 rgba(255, 60, 60, 0.3))
      drop-shadow(0.6px 0 rgba(60, 180, 255, 0.3))
      blur(0.25px);
  }
  50% {
    filter:
      drop-shadow(-1px 0 rgba(255, 80, 80, 0.4))
      drop-shadow(1px 0 rgba(80, 200, 255, 0.4))
      blur(0.35px);
  }
}

/* ğŸ“± Mobile balance */
@media (max-width: 768px) {
  .circuitTexture {
    background-size: 360px auto;
    opacity: 0.1;
    animation-duration: 55s;
  }
}